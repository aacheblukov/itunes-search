(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,n){e.exports=n(199)},127:function(e,t,n){},128:function(e,t,n){},147:function(e,t,n){},191:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(3),c=n.n(o),l=n(11),u=n(113),i=n(76),s=n.n(i),m=n(99),p=function(e){return 200!==e.status?404===e.status?Promise.resolve("We haven't found this singer in iTunes"):400===e.status?Promise.resolve("Incorrect request"):Promise.reject(new Error(e.statusText)):Promise.resolve(e)},f=function(e){var t=e.split(" ").join("+");return new Promise(function(e,n){try{fetch("https://cors-anywhere.herokuapp.com/https://itunes.apple.com/search?term=".concat(t,"&limit=500"),{}).then(p).then(function(e){return e.json()}).then(function(t){e(t.results)})}catch(a){n(new Error(a))}})},d="GET_DATA_REQUEST",v="GET_DATA_SUCCESS",b="SET_ALBUM",h="SET_SONG",g="PLAY_SONG",E=0,y=1,w=2,S=(n(127),function(e){var t=e.song,n=t.previewUrl,a=t.artworkUrl100,o=t.trackName,c=t.collectionName,u=t.trackTimeMillis,i=Object(l.c)(function(e){return e}).audioSrc,s=Object(l.b)();return r.a.createElement("div",{className:"song-item",onClick:function(){s({type:g,payload:n===i?"":n})}},r.a.createElement("div",{className:"cover",style:{backgroundImage:"url("+a+")"}}),r.a.createElement("div",{className:"track-info"},r.a.createElement("span",null,o),r.a.createElement("span",null,c),r.a.createElement("span",null,function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n}(u))),r.a.createElement("div",{className:" song-icon ".concat(n===i?"pause":"play")}))}),j=(n(128),n(201)),O=function(){var e=Object(l.c)(function(e){return e}),t=e.songs,n=e.album,o=e.song,c=e.loadingState,i=Object(a.useState)(t),s=Object(u.a)(i,2),m=s[0],p=s[1],f=function(e){return n?e.filter(function(e){return e.collectionName===n}):e},d=function(e){return o?e.filter(function(e){return e.trackName.toLowerCase().includes(o.toLowerCase())}):e};return Object(a.useEffect)(function(){var e=[f,d].reduce(function(e,t){return t(e)},t);p(e)},[o,n,t]),r.a.createElement("div",{className:"field-wrapper"},c===y?r.a.createElement(j.a,{size:"large"}):r.a.createElement("div",{className:"song-field"},m.length||!c?m.map(function(e,t){return r.a.createElement(S,{key:t,song:e})}):"We haven't found songs :("))},N=n(203),k=(n(147),function(){var e=N.a.Option,t=Object(l.c)(function(e){return e}).options,n=Object(l.b)(),a=function(e){n(function(e){return{type:b,payload:e}}(e))};return r.a.createElement(N.a,{className:"album-select",onChange:a,onSearch:a},t.map(function(t,n){var a=t.value,o=t.label;return r.a.createElement(e,{value:a,key:n},o)}))}),T=n(202),C=(n(191),function(){var e=T.a.Search,t=Object(l.b)();return r.a.createElement(e,{className:"input",onSearch:function(e){var n;t((n=e,function(){var e=Object(m.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.trim()){e.next=2;break}return e.abrupt("return");case 2:return t({type:d,payload:{loadingState:y}}),e.next=5,f(n);case 5:a=e.sent,t({type:v,payload:{data:a,searchQuery:n,loadingState:w}});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()))},enterButton:!0,placeholder:"Search by singer"})}),A=function(){var e=Object(l.b)();return r.a.createElement(T.a,{className:"input",onChange:function(t){var n;e((n=t.target.value,{type:h,payload:n}))},placeholder:"Filter by song"})},P=(n(197),n(198),function(){var e=Object(l.c)(function(e){return e}).audioSrc;return console.debug(""),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"header"},"Search singers via Itunes API"),r.a.createElement("div",{className:"inputs-wrapper"},r.a.createElement(C,null),r.a.createElement(k,null),r.a.createElement(A,null)),r.a.createElement(O,null),r.a.createElement("audio",{src:e,autoPlay:!0}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=n(36),x=n(111),L=n(112),I=n(57),U=n(38),W={apiData:[],album:"",song:"",audioSrc:"",songs:[],options:[{value:"",label:"All albums"}],loadingState:E},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:var n=t.payload.loadingState;return Object(U.a)({},e,{loadingState:n});case v:var a=t.payload,r=a.data,o=a.searchQuery,c=a.loadingState,l=r.filter(function(e){return e.artistName.toLowerCase()===o.toLowerCase()}),u=Object(I.a)(new Set(l.map(function(e){return e.collectionName}))),i=[].concat(Object(I.a)(W.options),Object(I.a)(function(e){return e.map(function(e){return{value:e,label:e}})}(u)));return Object(U.a)({},W,{songs:l,options:i,loadingState:c});case b:return Object(U.a)({},e,{album:t.payload});case g:return Object(U.a)({},e,{audioSrc:t.payload});case h:return Object(U.a)({},e,{song:t.payload});default:return e}},D=Object(_.createStore)(B,Object(x.composeWithDevTools)(Object(_.applyMiddleware)(L.a)));c.a.render(r.a.createElement(l.a,{store:D},r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[116,1,2]]]);
//# sourceMappingURL=main.579061df.chunk.js.map